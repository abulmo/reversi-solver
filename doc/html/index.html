<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Othello Solver: Othello Solver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Othello Solver<span id="projectnumber">&#160;version 1.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Othello Solver </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="solver_8c.html">solver.c</a> : a program to solve Othello endgame script.</p><ul>
<li>copyleft (c) 2001-2004</li>
<li>version 1.4 (2004-04-12 18:00:00)</li>
<li>author: Richard A Delorme</li>
<li>e-mail: <a href="#" onclick="location.href='mai'+'lto:'+'eda'+'x.'+'rev'+'er'+'si@'+'gm'+'ail'+'.c'+'om'; return false;">edax.<span class="obfuscator">.nosp@m.</span>reve<span class="obfuscator">.nosp@m.</span>rsi@g<span class="obfuscator">.nosp@m.</span>mail<span class="obfuscator">.nosp@m.</span>.com</a></li>
<li>github : <a href="https://github.com/abulmo/reversi-solver/">https://github.com/abulmo/reversi-solver/</a></li>
</ul>
<h1><a class="anchor" id="lic"></a>
License</h1>
<p>This code is released under the MIT License. See the LICENSE file for details.</p>
<h1><a class="anchor" id="pres"></a>
Presentation</h1>
<pre class="fragment"> "The important decisions in design are not what to put in but what to
  leave out."
             Tony Hoare
</pre><p> At <a href="ftp://ftp.nj.nec.com/pub/igord/IOS/src">ftp://ftp.nj.nec.com/pub/igord/IOS/src</a>, an Othello archive site, there was a program about endgame solving firstly written by Jean-Christophe Weill, then improved by Warren D Smith and further improved by Gunnar Anderson. Although my work was greatly influenced by these programs, the solver I present here is not another improvement but a complete re-implementation, done in a few hours by cutting and pasting code from my own program Edax. I tried to write an optimized but readable code, two incompatible things. Do not forget that the C language is a write-only language :-( Compared to their previous works:</p><ul>
<li>more general user interface. In addition to the best score, this solver also provides the best move and (if hash table is ON) the best principal variation, some performance data and, on demand, the tested board. The test positions (too easy, IMHO) are no more included into the code but are present within an external standardized script file "endgame.scr". Moreover, you may try "fforum-1-19.scr", "fforum-20-39.scr", and "fforum-40-59.scr", that contain problems published in the magazine of the Federation Francaise d'Othello: FFORUM.</li>
<li>strict ansi-C89 conformance.</li>
<li>more modular code. I put into functions many things sparsed into the same function.</li>
<li>avoidance of global variables. Instead I organize them into structures passed to functions as pointers. Structure and function naming was carefully chosen to give an object-oriented-programming feeling.</li>
<li>to keep code clear but fast, I overuse macro inlining.</li>
<li>more and better algorithms used:<ul>
<li>fast (due to inlining and loop-unrolling) move generators.</li>
<li>Principal Variation Search (an enhanced alphabeta) [1].</li>
<li>move sorting according to the type of the squares.</li>
<li>move sorting to play fastest &amp; stablest lines first.</li>
<li>move sorting based on approximated parity.</li>
<li>hash table [2] used to:<ul>
<li>anticipate cutoff at present level (if position is stored).</li>
<li>anticipate cutoff at the next level (enhanced transposition cutoff [3]).</li>
<li>replay known bestmove first.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>A faster endgame solver would need:</p><ul>
<li>a good evaluation function.</li>
<li>iterative deepening.</li>
<li>move sorting using shallow search.</li>
<li>"hard coding" of move generation, ...</li>
<li>64 bit board representation (bitboard) on 64 bit machine.</li>
<li>other heuristics: conspiracy number, ...</li>
</ul>
<p>but the following code is already much too long. Whatever, this solver is very fast for positions with less than 15 empties and still quiet good until 20 empties. The source has been kept in a single file to mimic other similar but older othello endgame solvers ; however, any clever implementation should split it in smaller files gathering the same logical content.</p>
<h1><a class="anchor" id="comp"></a>
Compilation</h1>
<p>I recommend to compile it with very aggressive optimizing settings, for example with the gnu compiler:</p>
<p>gcc -O3 -fomit-frame-pointer -funroll-loops -march=&lt;your-CPU&gt; <a class="el" href="solver_8c.html">solver.c</a> -o solver</p>
<p>A few #define at the top of the code may be changed to test/tune the effect of different parameters.</p>
<h1><a class="anchor" id="us"></a>
Usage</h1>
<p>Usage: solver [options] script_file</p>
<p>Options:</p><ul>
<li>-v verbose mode.</li>
<li>-vv very verbose mode.</li>
<li>-wdl search for win/draw/loss.</li>
<li>-wd search for win/(draw-loss).</li>
<li>-dl search for (win-draw)/loss.</li>
<li>-h &lt;nbits&gt; set hash table size.</li>
</ul>
<p>Note: the best value for the '-h' option, i.e. the hash table size in bit number is approximately the number of empty squares of the position. Example: solver -v -h 20 fforum-20-39.scr</p>
<h1><a class="anchor" id="hist"></a>
History</h1>
<ul>
<li>version 1.0: 2001-10-31</li>
<li>version 1.1: 2001-12-19<ul>
<li>added stablest square based sorting</li>
<li>node counter as Macros</li>
<li>cosmetic enhancements.</li>
</ul>
</li>
<li>version 1.2: 2003-12-06<ul>
<li>added parity based sorting</li>
<li>plain alphabeta near the leaves</li>
<li>better comments &amp; documentation (compatible with doxygen).</li>
<li>suppression of annoying statistic routines.</li>
<li>minor bug removals.</li>
<li>minor speed enhancements.</li>
<li>cosmetic enhancements.</li>
</ul>
</li>
<li>version 1.3: 2004-02-18<ul>
<li>major bug removals: parity missing initialisation.</li>
<li>minor bug removals.</li>
</ul>
</li>
<li>version 1.4: 2004-04-12<ul>
<li>major bug removal: wrong score returned from game-over positions.</li>
<li>minor speed enhancements: board update/restore unrolling.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="ref"></a>
Reference</h1>
<ol type="1">
<li>Marsland T.A. (1983) Relative efficiency of alpha-beta implementations. 8th IIJCAI. p 763-766.</li>
<li>Breuker D.M., Uiterwijk J.W.H.M. &amp; van den Herik H.J. (1996) Replacement Schemes and Two-Level Tables. ICCA J 19-3 p 183-193.</li>
<li>Plaat A, Schaeffer J., Wirn P. &amp; de Bruin A.(1996) Exploiting Graph Properties of Game Trees.</li>
</ol>
<h1><a class="anchor" id="thk"></a>
Thanks</h1>
<ul>
<li>to Christophe Lanuit, for the stablest sorting heuristics.</li>
<li>to Bruno Causse, who discovered an illogical bug when passing.</li>
<li>to Gunnar Anderson, who gave me the idea about the parity based on quadrant, as a fast sorting algorithm at shallow depth.</li>
<li>to Bj√∂rn Lindberg, who reported a bug in version 1.3.</li>
<li>to people at GGS for their invaluable comments about this file. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
